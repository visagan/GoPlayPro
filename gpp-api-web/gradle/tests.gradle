sourceSets {
    test {
        groovy {
            srcDirs 'src/test/unit/groovy','src/test/functional/groovy'
        }
        resources.srcDir 'src/test/resources'
    }
    testFunctional {
        groovy {
            srcDir 'src/test/functional/groovy'
            compileClasspath += main.output + test.output
            runtimeClasspath += main.output + test.output
        }
        resources.srcDir 'src/test/resources'
    }
}

configurations {
    testFunctionalCompile.extendsFrom testCompile
    testFunctionalCompile.extendsFrom testRuntime
}

task testFunctional(type:Test) {
    description = "Run integration tests (located in src/test/functional/...)."
    testClassesDir = sourceSets.testFunctional.output.classesDir
    classpath = sourceSets.testFunctional.runtimeClasspath
}

testFunctional.reports.html.destination = file("$buildDir/reports/test/functional")
